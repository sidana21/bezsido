# إعداد Cloudinary على Render

## الخطوات المطلوبة

### 1. الحصول على بيانات Cloudinary

1. اذهب إلى [cloudinary.com](https://cloudinary.com)
2. سجل دخول أو أنشئ حساب جديد (مجاني)
3. من Dashboard، ستجد في قسم **Account Details**:
   - Cloud Name
   - API Key
   - API Secret

### 2. إضافة المتغيرات البيئية على Render

1. اذهب إلى لوحة تحكم Render
2. اختر مشروعك (Web Service)
3. اذهب إلى **Environment** من القائمة الجانبية
4. أضف المتغيرات التالية:

```
CLOUDINARY_CLOUD_NAME=اسم_الكلاود_الخاص_بك
CLOUDINARY_API_KEY=مفتاح_API
CLOUDINARY_API_SECRET=السر_الخاص_بـ_API
```

5. احفظ التغييرات
6. أعد تشغيل الخدمة (Redeploy)

### 3. التحقق من نجاح الإعداد

بعد إعادة التشغيل، تحقق من logs:
- ستجد رسالة: `✅ Cloudinary configured successfully`
- إذا لم تظهر: تأكد من إدخال البيانات بشكل صحيح

## كيف يعمل النظام

1. **عند رفع صورة/فيديو**: يتم رفعها مباشرة إلى Cloudinary
2. **يتم حفظ الرابط**: في قاعدة البيانات NeonDB فقط
3. **عند عرض الملف**: يتم تحميله من Cloudinary مباشرة
4. **في حالة الخطأ**: يتم الحفظ محلياً كنسخة احتياطية (مؤقتة)

## المزايا

- ✅ لن تضيع الملفات عند تحديث Render
- ✅ تخزين سحابي موثوق وسريع
- ✅ دعم للصور والفيديوهات بجودة عالية
- ✅ نظام احتياطي تلقائي

## الملفات المعدلة

- `server/cloudinary.ts` - إعدادات Cloudinary
- `server/routes.ts` - endpoint رفع الملفات
- `server/index.ts` - تهيئة عند بدء السيرفر
- `package.json` - إضافة مكتبة cloudinary

---

**ملاحظة**: الخطة المجانية من Cloudinary كافية للاستخدام العادي وتدعم:
- 25 GB تخزين
- 25 GB نقل بيانات شهرياً
- معالجة الصور والفيديوهات
