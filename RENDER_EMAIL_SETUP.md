# إعداد خدمة البريد الإلكتروني على Render

## المشكلة
عدم وصول رموز التحقق (OTP) عبر البريد الإلكتروني بعد النشر على Render.

## الحل
يجب إعداد متغيرات البيئة الخاصة بالبريد الإلكتروني في لوحة تحكم Render.

## طريقتان للإعداد

### الطريقة الأولى: استخدام Gmail (الأسهل)

1. **إنشاء كلمة مرور التطبيق في Gmail:**
   - اذهب إلى إعدادات Google Account
   - اختر "الأمان" -> "التحقق بخطوتين"
   - اختر "كلمات مرور التطبيقات"
   - أنشئ كلمة مرور جديدة للتطبيق

2. **إضافة المتغيرات في Render:**
   ```
   GMAIL_USER=your-email@gmail.com
   GMAIL_APP_PASSWORD=your-16-character-app-password
   FROM_EMAIL=your-email@gmail.com
   ```

### الطريقة الثانية: استخدام SendGrid (للإنتاج)

1. **إنشاء حساب SendGrid:**
   - سجل في sendgrid.com
   - احصل على API Key

2. **إضافة المتغيرات في Render:**
   ```
   SENDGRID_API_KEY=your-sendgrid-api-key
   FROM_EMAIL=noreply@yourdomain.com
   ```

## خطوات الإعداد في Render

1. **اذهب إلى لوحة تحكم Render:**
   - افتح مشروعك
   - اختر "Environment"

2. **أضف المتغيرات:**
   - اضغط "Add Environment Variable"
   - أدخل القيم المطلوبة حسب الطريقة المختارة

3. **إعادة النشر:**
   - بعد إضافة المتغيرات، سيتم إعادة نشر التطبيق تلقائياً
   - أو يمكنك الضغط على "Manual Deploy"

## التحقق من عمل الخدمة

بعد النشر، افتح لوحة الإدارة وتحقق من Logs. يجب أن تظهر رسالة:
- `✅ Gmail email service initialized` أو
- `✅ SendGrid email service initialized`

## ملاحظات مهمة

- ⚠️ لا تشارك كلمات المرور أو API Keys مع أحد
- 🔄 بعد إضافة المتغيرات، قد يحتاج التطبيق لبضع دقائق ليعمل
- 📧 تأكد من أن البريد الإلكتروني المستخدم صحيح وموثق
- 🚀 SendGrid أفضل للمشاريع الكبيرة، Gmail يكفي للتطبيقات الصغيرة

## اختبار الخدمة

يمكنك اختبار إرسال OTP من خلال:
1. محاولة تسجيل مستخدم جديد
2. تسجيل الدخول بحساب موجود
3. مراجعة logs التطبيق في Render

إذا ظهرت رسالة "⚠️ No email service configured"، فهذا يعني أن المتغيرات لم تُضبط بعد.